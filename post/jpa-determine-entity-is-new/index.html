<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Eottabom&#x27;s Lab. - ì–´ëŠ ë”°ëœ»í•œ ë´„ë‚ ì´ ë‚˜ì—ê²Œë„ ì˜¤ê² ì§€... ê³µë¶€í•˜ëŠ” ê°œë°œì ê¸°ìˆ  ë¸”ë¡œê·¸</title><meta name="next-head-count" content="3"/><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" crossorigin="anonymous"></script><link rel="preload" href="/_next/static/css/0e8f630ef30f29dd.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/0e8f630ef30f29dd.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-9812adf83da216f2.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-03cd576e71e4cd66.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-b3e5bad5ec63c840.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-488ad85de98997d1.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/609-3bdadfe3937533de.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/post/%5Bid%5D-b584a77d32b9c1b9.js" defer="" crossorigin=""></script><script src="/_next/static/5MMN3e4xL5zhvjFseGHAk/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/5MMN3e4xL5zhvjFseGHAk/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="fixed top-0 left-0 w-full h-1 z-50 bg-transparent"><div class="h-full bg-gradient-to-r from-black via-blue-500 to-teal-400 transition-all duration-150" style="width:0%"></div></div><header class="flex justify-end items-center px-6 py-4"><div class="flex gap-6 items-center"><a class="text-black hover:text-blue-300" href="/"><span class="font-bold">Main</span></a><a class="text-black hover:text-blue-300 font-bold" href="/post/">Post</a><a class="text-black hover:text-blue-300 font-bold" href="/about/">About</a></div></header><div class="max-w-[90rem] mx-auto px-6 py-20 flex gap-16"><main class="flex-1 prose prose-xl max-w-none"><h1 class="text-4xl font-bold mb-4">Spring Data JPA - ìƒˆë¡œìš´ Entity íŒë³„</h1><p class="text-gray-500 text-sm mb-8">2025-04-30</p><article class="overflow-x-auto"><div class="my-4 px-4 py-3 rounded-md prose bg-blue-50 dark:bg-blue-900/30 border-l-4 border-blue-400 text-blue-900 dark:text-blue-100"><div class="text-mi flex items-center gap-2 mt-2 mb-1 text-blue-700 dark:text-blue-300"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-blue-700 dark:text-blue-300"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg>Spring Data JPA ë¥¼ ì‚¬ìš©í•˜ë‹¤ë³´ë©´ save() ë©”ì„œë“œ í˜¸ì¶œ ì‹œ ë‚´ë¶€ì ìœ¼ë¡œ persist() ë¥¼ í˜¸ì¶œí• ì§€, merge() ë¥¼ í˜¸ì¶œ í•  ì§€ ê²°ì •í•˜ê²Œ ëœë‹¤. </div><div class="space-y-1 text-mi pl-[1.3rem] text-blue-700 dark:text-blue-300"><div>í•´ë‹¹ Entity ê°€ ìƒˆë¡œìš´ Entity ì¸ì§€ ì—¬ë¶€ì— ë”°ë¼ ê²°ì •ë˜ëŠ”ë°, Spring Data JPA ëŠ” Entity ê°€ ìƒˆë¡œìš´ì§€ ì–´ë–»ê²Œ íŒë‹¨í•˜ëŠ”ì§€ ì•Œì•„ë³´ì.</div></div></div>
<hr/>
<h3 id="ì‹ ê·œ-entity-íŒë‹¨-ë°©ì‹"><a aria-hidden="true" tabindex="-1" href="#ì‹ ê·œ-entity-íŒë‹¨-ë°©ì‹"><span class="icon icon-link"></span></a>ì‹ ê·œ Entity íŒë‹¨ ë°©ì‹</h3>
<p>Spring Data JPA ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ <code>JpaEntityInformation</code> ì˜ <code>isNew(T entity)</code> ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì„œ íŒë‹¨í•œë‹¤.</p>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line"><span class="token annotation punctuation">@Override</span>
</span><span class="code-line"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isNew</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>versionAttribute<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token operator">||</span> versionAttribute<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Attribute</span><span class="token operator">::</span><span class="token function">getJavaType</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token operator">::</span><span class="token function">isPrimitive</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">isNew</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token class-name">BeanWrapper</span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DirectFieldAccessFallbackBeanWrapper</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">return</span> versionAttribute<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>it <span class="token operator">-&gt;</span> wrapper<span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<ul>
<li><code>@Version</code> í•„ë“œê°€ ìˆë‹¤ë©´ â†’ í•´ë‹¹ ë²„ì „ í•„ë“œ ê°’ì´ null ì¸ì§€ ì—¬ë¶€ë¡œ íŒë‹¨</li>
<li><code>@Version</code> í•„ë“œê°€ ì—†ë‹¤ë©´ â†’ <code>@Id</code> í•„ë“œê°€ null ì´ê±°ë‚˜, primitive íƒ€ì…ì¼ ê²½ìš°, 0ì¸ì§€ ì—¬ë¶€ë¡œ íŒë‹¨</li>
</ul>
<div class="my-4 px-4 py-3 rounded-md prose bg-purple-50 dark:bg-purple-900/30 border-l-4 border-purple-400 text-purple-900 dark:text-purple-100"><div class="text-mi flex items-center gap-2 mt-2 mb-1 text-purple-700 dark:text-purple-300"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-purple-700 dark:text-purple-300"><path d="M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"></path><path d="m9 12 2 2 4-4"></path></svg>ì¦‰, ID ê°€ null ì´ë©´ <!-- -->ì‹ ê·œ Entity ë¡œ ê°„ì£¼<!-- -->í•˜ì—¬ <!-- -->persist()<!-- --> ê°€ í˜¸ì¶œëœë‹¤.</div><div class="space-y-1 text-mi pl-[1.3rem] text-purple-700 dark:text-purple-300"></div></div>
<hr/>
<h3 id="ì§ì ‘-id-ë¥¼-ì§€ì •í•œ-ê²½ìš°ì˜-ë™ì‘"><a aria-hidden="true" tabindex="-1" href="#ì§ì ‘-id-ë¥¼-ì§€ì •í•œ-ê²½ìš°ì˜-ë™ì‘"><span class="icon icon-link"></span></a>ì§ì ‘ ID ë¥¼ ì§€ì •í•œ ê²½ìš°ì˜ ë™ì‘</h3>
<p>IDë¥¼ ì§ì ‘ ì§€ì •í•˜ê³  <code>save()</code> ë¥¼ í˜¸ì¶œí•˜ë©´, JPA ëŠ” í•´ë‹¹ Entity ê°€ ê¸°ì¡´ì— ì¡´ì¬í•œë‹¤ê³  íŒë‹¨í•˜ì—¬ merge()ë¥¼ ìˆ˜í–‰í•œë‹¤. <br/>
ì´ë•Œ ì‹¤ì œ Database ì— í•´ë‹¹ IDê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´, <span class="text-blue-600 font-bold"> SELECT ì¿¼ë¦¬ëŠ” 0ê±´ì„ ë°˜í™˜í•˜ê³  </span> <br/>
JPA ëŠ” ë³‘í•©ìš© ì—”í‹°í‹°ë¥¼ ìƒˆë¡œ ìƒì„±í•˜ì—¬ INSERT ë¥¼ ì‹œë„í•˜ê±°ë‚˜, ì œì•½ ì¡°ê±´ ìœ„ë°˜ìœ¼ë¡œ ì˜ˆì™¸ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. <br/>
<span class="text-red-600 font-bold"> ê²°êµ­, ì‹ ê·œ Entity ì„ì—ë„ JPA ëŠ” ê¸°ì¡´ ë°ì´í„°ì²˜ëŸ¼ ì¸ì‹í•˜ê²Œ ë˜ì–´, ì˜ë„ì¹˜ ì•Šì€ UPDATE ë˜ëŠ” INSERT ì‹¤íŒ¨ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆë‹¤ </span></p>
<div class="my-4 px-4 py-3 rounded-md prose bg-purple-50 dark:bg-purple-900/30 border-l-4 border-purple-400 text-purple-900 dark:text-purple-100"><div class="text-mi flex items-center gap-2 mt-2 mb-1 text-purple-700 dark:text-purple-300"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-purple-700 dark:text-purple-300"><path d="M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"></path><path d="m9 12 2 2 4-4"></path></svg>merge<!-- --> ëŠ” <!-- -->UPDATE<!-- --> ë¿ë§Œ ì•„ë‹ˆë¼, <!-- -->INSERT<!-- --> ë„ ê°€ëŠ¥í•˜ì§€ë§Œ, </div><div class="space-y-1 text-mi pl-[1.3rem] text-purple-700 dark:text-purple-300"><div>ì§ì ‘ ID ê°€ ì§€ì •ëœ ì‹ ê·œ ì—”í‹°í‹°ì—ëŠ” ë§¤ìš° ìœ„í—˜í•˜ë‹¤.</div></div></div>
<p>ì´ë¥¼ í•´ê²° í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œëŠ” <code>Persistable&lt;T&gt;</code> ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë©´ ëœë‹¤.</p>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line"><span class="token comment">// User.class</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token annotation punctuation">@Entity</span>
</span><span class="code-line"><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;users&quot;</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token annotation punctuation">@EntityListeners</span><span class="token punctuation">(</span><span class="token class-name">UserEntityListener</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Persistable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
</span><span class="code-line">
</span><span class="code-line">	<span class="token annotation punctuation">@Id</span>
</span><span class="code-line">	<span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">	<span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">	<span class="token keyword">private</span> <span class="token keyword">boolean</span> isNew <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">	<span class="token keyword">protected</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">
</span><span class="code-line">	<span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">	<span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">		<span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
</span><span class="code-line">		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
</span><span class="code-line">	<span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">	<span class="token annotation punctuation">@Override</span>
</span><span class="code-line">	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span>
</span><span class="code-line">	<span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">		<span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
</span><span class="code-line">	<span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
</span><span class="code-line">	<span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">	<span class="token annotation punctuation">@Override</span>
</span><span class="code-line">	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isNew<span class="token punctuation">;</span>
</span><span class="code-line">	<span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setIsNew</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> isNew<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">		<span class="token keyword">this</span><span class="token punctuation">.</span>isNew <span class="token operator">=</span> isNew<span class="token punctuation">;</span>
</span><span class="code-line">	<span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// UserEntityListener.class</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserEntityListener</span> <span class="token punctuation">{</span>
</span><span class="code-line">	<span class="token annotation punctuation">@PostPersist</span>
</span><span class="code-line">	<span class="token annotation punctuation">@PostLoad</span>
</span><span class="code-line">	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNotNew</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;@PostPersist/@PostLoad called&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">		user<span class="token punctuation">.</span><span class="token function">setIsNew</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">	<span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<hr/>
<h3 id="persist-vs-merge"><a aria-hidden="true" tabindex="-1" href="#persist-vs-merge"><span class="icon icon-link"></span></a>persist() vs merge()</h3>
<table><thead><tr><th>êµ¬ë¶„</th><th>persist()</th><th>merge()</th></tr></thead><tbody><tr><td>ë™ì‘</td><td>ìƒˆë¡œìš´ Entity ë¥¼ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ë“±ë¡</td><td>ì¤€ì˜ì† ê°ì²´ë¥¼ ë³‘í•©í•˜ì—¬ ê´€ë¦¬</td></tr><tr><td>SELECT ì¿¼ë¦¬</td><td>âŒ</td><td>âœ… ë¨¼ì € ì¡°íšŒ í›„ merge</td></tr><tr><td>ID í•„ìš” ì—¬ë¶€</td><td>âŒ</td><td>âœ…</td></tr><tr><td>ì„±ëŠ¥</td><td>ë¹ ë¦„ (ì§ì ‘ INSERT)</td><td>ëŠë¦´ìˆ˜ ìˆë‹¤ (SELECT + UPDATE)</td></tr></tbody></table>
<div class="my-4 px-4 py-3 rounded-md prose bg-purple-50 dark:bg-purple-900/30 border-l-4 border-purple-400 text-purple-900 dark:text-purple-100"><div class="text-mi flex items-center gap-2 mt-2 mb-1 text-purple-700 dark:text-purple-300"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-purple-700 dark:text-purple-300"><path d="M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"></path><path d="m9 12 2 2 4-4"></path></svg>ì‹ ê·œ ê°ì²´ë¥¼ merge() ë¡œ ì²˜ë¦¬í•˜ë©´ ë¶ˆí•„ìš”í•œ SELECT ì¿¼ë¦¬ê°€ ë°œìƒí•˜ê³  ì„±ëŠ¥ ì €í•˜ ê°€ëŠ¥ì„±ì´ ì¡´ì¬í•˜ê²Œ ëœë‹¤.</div><div class="space-y-1 text-mi pl-[1.3rem] text-purple-700 dark:text-purple-300"></div></div>
<hr/>
<h3 id="ì‹ ê·œ-entity-íŒë‹¨ì´-ì¤‘ìš”í•œ-ì´ìœ ëŠ”-ë¬´ì—‡ì¼ê¹Œ"><a aria-hidden="true" tabindex="-1" href="#ì‹ ê·œ-entity-íŒë‹¨ì´-ì¤‘ìš”í•œ-ì´ìœ ëŠ”-ë¬´ì—‡ì¼ê¹Œ"><span class="icon icon-link"></span></a>ì‹ ê·œ Entity íŒë‹¨ì´ ì¤‘ìš”í•œ ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œ?</h3>
<p>Spring Data JPA ì˜ <code>SimpleJpaRepository</code> ëŠ” <code>save()</code> ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ë™ì‘í•œë‹¤.</p>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line"><span class="token annotation punctuation">@Transactional</span>
</span><span class="code-line"><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">S</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">S</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">S</span> entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>entityInformation<span class="token punctuation">.</span><span class="token function">isNew</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        entityManager<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// INSERT</span>
</span><span class="code-line">        <span class="token keyword">return</span> entity<span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">return</span> entityManager<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// SELECT â†’ UPDATE, ì¡´ì¬í•˜ë©´ UPDATE ì—†ìœ¼ë©´ INSERT ê°€ëŠ¥ì„± ìˆìŒ</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>ID ë¥¼ ì§ì ‘ ì„¤ì •í–ˆì§€ë§Œ, <code>isNew()</code> ëŠ” false ê°€ ë˜ì–´, <code>merge()</code> ë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ê³ , <br/>
Database ì—ëŠ” í•´ë‹¹ ID ê°€ ì¡´ì¬í•˜ì§€ ì•Šì§€ë§Œ, ì‹ ê·œ Entity ì„ì—ë„ ë¶ˆêµ¬í•˜ê³ , <code>SELECT</code> í›„ <code>UPDATE</code> ë¥¼ í•˜ê²Œ ë˜ì–´ (ì´ ë•Œ, database ì¡°íšŒ) ì‹¤íŒ¨ ë˜ëŠ” ë°ì´í„° ë¬´ê²°ì„± ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆê³ , ë¹„íš¨ìœ¨ì ì´ë‹¤.</p>
<div class="my-4 px-4 py-3 rounded-md prose bg-purple-50 dark:bg-purple-900/30 border-l-4 border-purple-400 text-purple-900 dark:text-purple-100"><div class="text-mi flex items-center gap-2 mt-2 mb-1 text-purple-700 dark:text-purple-300"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-purple-700 dark:text-purple-300"><path d="M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"></path><path d="m9 12 2 2 4-4"></path></svg>ì •í™•í•œ isNew() ì œì–´ëŠ” ì„±ëŠ¥, ì •í•©ì„±, ì¿¼ë¦¬ íš¨ìœ¨ì„± ì¸¡ë©´ì—ì„œ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤.</div><div class="space-y-1 text-mi pl-[1.3rem] text-purple-700 dark:text-purple-300"></div></div>
<hr/>
<h3 id="ìš”ì•½"><a aria-hidden="true" tabindex="-1" href="#ìš”ì•½"><span class="icon icon-link"></span></a>ìš”ì•½</h3>
<table><thead><tr><th>ìƒí™©</th><th>ì²˜ë¦¬ë°©ì‹</th></tr></thead><tbody><tr><td>ID ì—†ê±°ë‚˜ null â†’ ì‹ ê·œ Entity</td><td>persist()</td></tr><tr><td>IDê°€ ì¡´ì¬í•˜ì§€ë§Œ ì‹¤ì œ DB ì—ëŠ” ì—†ìŒ</td><td>merge() í˜¸ì¶œ â†’ ì‹¤íŒ¨ ê°€ëŠ¥ì„± / ë¹„íš¨ìœ¨</td></tr><tr><td>ID ë¥¼ ì§ì ‘ ì„¤ì •í•œ ì‹ ê·œ Entity</td><td>Persistable&lt;T&gt; + isNew() ë¡œ ëª…ì‹œ í•„ìš”</td></tr></tbody></table>
<div class="my-4 px-4 py-3 rounded-md prose bg-cyan-50 dark:bg-cyan-900/30 border-l-4 border-cyan-400 text-cyan-900 dark:text-cyan-100"><div class="text-mi flex items-center gap-2 mt-2 mb-1 text-cyan-700 dark:text-cyan-300"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-cyan-700 dark:text-cyan-300"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path><path d="M5 3v4"></path><path d="M19 17v4"></path><path d="M3 5h4"></path><path d="M17 19h4"></path></svg><a href="https://github.com/eottabom/let-me-code/tree/main/src/main/java/com/eottabom/letmecode/example/_01_jpa_entity">ì˜ˆì œ ì½”ë“œ ë³´ëŸ¬ê°€ê¸° (í´ë¦­)</a></div><div class="space-y-1 text-mi pl-[1.3rem] text-cyan-700 dark:text-cyan-300"></div></div>
<br/>
<br/>
<hr/>
<div class="my-4 px-4 py-3 rounded-md prose bg-green-50 dark:bg-green-900/30 border-l-4 border-green-400 text-green-900 dark:text-green-100"><div class="text-mi flex items-center gap-2 mt-2 mb-1 text-green-700 dark:text-green-300"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-green-700 dark:text-green-300"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg><b>ì •ë¦¬</b></div><div class="space-y-1 text-mi pl-[1.3rem] text-green-700 dark:text-green-300"><div>Spring Data JPA ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ isNew() ë¥¼ í†µí•´ì„œ ì‹ ê·œ Entity ì—¬ë¶€ë¥¼ íŒë‹¨í•œë‹¤.</div><div>ID ëŠ” ì¡´ì¬í•˜ì§€ë§Œ ì‹¤ì œ DB ì— ì—†ëŠ” ê²½ìš° SELECT + UPDATE í›„ merge ë¥¼ í•˜ë¯€ë¡œ ì •í•©ì„±ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆê³ , ë¹„íš¨ìœ¨ì ì´ë‹¤.</div><div>ID ë¥¼ ì§ì ‘ ì„¤ì •í–ˆì„ ê²½ìš°ëŠ” Persistable + isNew() ë¡œ ëª…ì‹œí•˜ëŠ” ê²ƒì´ í•„ìš”í•˜ë‹¤.</div></div></div>
<hr/>
<h3 id="-reference"><a aria-hidden="true" tabindex="-1" href="#-reference"><span class="icon icon-link"></span></a>ğŸ“š Reference</h3>
<ul>
<li><a href="https://docs.spring.io/spring-data/jpa/docs/current/api/org/springframework/data/jpa/repository/support/JpaEntityInformation.html">Spring Docs - JpaEntityInformation</a></li>
<li><a href="https://docs.spring.io/spring-data/jpa/reference/jpa/entity-persistence.html">Spring Docs - entity-persistence</a></li>
</ul>
<br/>
<br/></article></main><aside class="hidden lg:block sticky top-[96px] w-60 h-[calc(100vh-96px)] pl-4 z-40 pb-[120px]"><div class="relative h-full"><div class="overflow-y-auto h-full pr-2 scrollbar-hide"><h2 class="text-sm font-semibold mb-2">ğŸ§¾ ëª©ì°¨</h2><ul class="space-y-1 text-xs sm:text-sm text-gray-700 pb-12"></ul></div></div></aside></div><a class="fixed bottom-6 right-6 z-50 bg-white border border-gray-300 rounded-lg shadow-md p-3 hover:shadow-lg transition" aria-label="ëª©ë¡ìœ¼ë¡œ ê°€ê¸°" href="/post/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 text-gray-800"><line x1="8" x2="21" y1="6" y2="6"></line><line x1="8" x2="21" y1="12" y2="12"></line><line x1="8" x2="21" y1="18" y2="18"></line><line x1="3" x2="3.01" y1="6" y2="6"></line><line x1="3" x2="3.01" y1="12" y2="12"></line><line x1="3" x2="3.01" y1="18" y2="18"></line></svg></a></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"postData":{"id":"jpa-determine-entity-is-new","mdxSource":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    info: \"info\",\n    p: \"p\",\n    hr: \"hr\",\n    h3: \"h3\",\n    a: \"a\",\n    span: \"span\",\n    code: \"code\",\n    pre: \"pre\",\n    ul: \"ul\",\n    li: \"li\",\n    note: \"note\",\n    strong: \"strong\",\n    table: \"table\",\n    thead: \"thead\",\n    tr: \"tr\",\n    th: \"th\",\n    tbody: \"tbody\",\n    td: \"td\",\n    tip: \"tip\",\n    success: \"success\"\n  }, _provideComponents(), props.components), {BlueText, RedText} = _components;\n  if (!BlueText) _missingMdxReference(\"BlueText\", true);\n  if (!RedText) _missingMdxReference(\"RedText\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.info, {\n      children: _jsxs(_components.p, {\n        children: [\"Spring Data JPA ë¥¼ ì‚¬ìš©í•˜ë‹¤ë³´ë©´ save() ë©”ì„œë“œ í˜¸ì¶œ ì‹œ ë‚´ë¶€ì ìœ¼ë¡œ persist() ë¥¼ í˜¸ì¶œí• ì§€, merge() ë¥¼ í˜¸ì¶œ í•  ì§€ ê²°ì •í•˜ê²Œ ëœë‹¤. \", _jsx(\"br\", {}), \"\\ní•´ë‹¹ Entity ê°€ ìƒˆë¡œìš´ Entity ì¸ì§€ ì—¬ë¶€ì— ë”°ë¼ ê²°ì •ë˜ëŠ”ë°, Spring Data JPA ëŠ” Entity ê°€ ìƒˆë¡œìš´ì§€ ì–´ë–»ê²Œ íŒë‹¨í•˜ëŠ”ì§€ ì•Œì•„ë³´ì.\"]\n      })\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsxs(_components.h3, {\n      id: \"ì‹ ê·œ-entity-íŒë‹¨-ë°©ì‹\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#ì‹ ê·œ-entity-íŒë‹¨-ë°©ì‹\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"ì‹ ê·œ Entity íŒë‹¨ ë°©ì‹\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Spring Data JPA ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ \", _jsx(_components.code, {\n        children: \"JpaEntityInformation\"\n      }), \" ì˜ \", _jsx(_components.code, {\n        children: \"isNew(T entity)\"\n      }), \" ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì„œ íŒë‹¨í•œë‹¤.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-java\",\n      children: _jsxs(_components.code, {\n        className: \"language-java code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token annotation punctuation\",\n            children: \"@Override\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"public\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"boolean\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"isNew\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"T\"\n          }), \" entity\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"versionAttribute\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"isEmpty\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"||\"\n          }), \" versionAttribute\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"map\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"Attribute\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"::\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"getJavaType\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"map\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"Class\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"::\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"isPrimitive\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"orElse\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token boolean\",\n            children: \"false\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"super\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"isNew\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"entity\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"BeanWrapper\"\n          }), \" wrapper \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"new\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"DirectFieldAccessFallbackBeanWrapper\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"entity\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" versionAttribute\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"map\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"it \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"-\u003e\"\n          }), \" wrapper\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"getPropertyValue\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"it\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"getName\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"==\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"null\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"orElse\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token boolean\",\n            children: \"true\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"@Version\"\n        }), \" í•„ë“œê°€ ìˆë‹¤ë©´ â†’ í•´ë‹¹ ë²„ì „ í•„ë“œ ê°’ì´ null ì¸ì§€ ì—¬ë¶€ë¡œ íŒë‹¨\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"@Version\"\n        }), \" í•„ë“œê°€ ì—†ë‹¤ë©´ â†’ \", _jsx(_components.code, {\n          children: \"@Id\"\n        }), \" í•„ë“œê°€ null ì´ê±°ë‚˜, primitive íƒ€ì…ì¼ ê²½ìš°, 0ì¸ì§€ ì—¬ë¶€ë¡œ íŒë‹¨\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.note, {\n      children: _jsxs(_components.p, {\n        children: [\"ì¦‰, ID ê°€ null ì´ë©´ \", _jsx(_components.strong, {\n          children: \"ì‹ ê·œ Entity ë¡œ ê°„ì£¼\"\n        }), \"í•˜ì—¬ \", _jsx(_components.strong, {\n          children: \"persist()\"\n        }), \" ê°€ í˜¸ì¶œëœë‹¤.\"]\n      })\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsxs(_components.h3, {\n      id: \"ì§ì ‘-id-ë¥¼-ì§€ì •í•œ-ê²½ìš°ì˜-ë™ì‘\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#ì§ì ‘-id-ë¥¼-ì§€ì •í•œ-ê²½ìš°ì˜-ë™ì‘\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"ì§ì ‘ ID ë¥¼ ì§€ì •í•œ ê²½ìš°ì˜ ë™ì‘\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"IDë¥¼ ì§ì ‘ ì§€ì •í•˜ê³  \", _jsx(_components.code, {\n        children: \"save()\"\n      }), \" ë¥¼ í˜¸ì¶œí•˜ë©´, JPA ëŠ” í•´ë‹¹ Entity ê°€ ê¸°ì¡´ì— ì¡´ì¬í•œë‹¤ê³  íŒë‹¨í•˜ì—¬ merge()ë¥¼ ìˆ˜í–‰í•œë‹¤. \", _jsx(\"br\", {}), \"\\nì´ë•Œ ì‹¤ì œ Database ì— í•´ë‹¹ IDê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´, \", _jsx(BlueText, {\n        children: \" SELECT ì¿¼ë¦¬ëŠ” 0ê±´ì„ ë°˜í™˜í•˜ê³  \"\n      }), \" \", _jsx(\"br\", {}), \"\\nJPA ëŠ” ë³‘í•©ìš© ì—”í‹°í‹°ë¥¼ ìƒˆë¡œ ìƒì„±í•˜ì—¬ INSERT ë¥¼ ì‹œë„í•˜ê±°ë‚˜, ì œì•½ ì¡°ê±´ ìœ„ë°˜ìœ¼ë¡œ ì˜ˆì™¸ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. \", _jsx(\"br\", {}), \"\\n\", _jsx(RedText, {\n        children: \" ê²°êµ­, ì‹ ê·œ Entity ì„ì—ë„ JPA ëŠ” ê¸°ì¡´ ë°ì´í„°ì²˜ëŸ¼ ì¸ì‹í•˜ê²Œ ë˜ì–´, ì˜ë„ì¹˜ ì•Šì€ UPDATE ë˜ëŠ” INSERT ì‹¤íŒ¨ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆë‹¤ \"\n      })]\n    }), \"\\n\", _jsx(_components.note, {\n      children: _jsxs(_components.p, {\n        children: [_jsx(_components.strong, {\n          children: \"merge\"\n        }), \" ëŠ” \", _jsx(_components.strong, {\n          children: \"UPDATE\"\n        }), \" ë¿ë§Œ ì•„ë‹ˆë¼, \", _jsx(_components.strong, {\n          children: \"INSERT\"\n        }), \" ë„ ê°€ëŠ¥í•˜ì§€ë§Œ, \", _jsx(\"br\", {}), \"\\nì§ì ‘ ID ê°€ ì§€ì •ëœ ì‹ ê·œ ì—”í‹°í‹°ì—ëŠ” ë§¤ìš° ìœ„í—˜í•˜ë‹¤.\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"ì´ë¥¼ í•´ê²° í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œëŠ” \", _jsx(_components.code, {\n        children: \"Persistable\u003cT\u003e\"\n      }), \" ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë©´ ëœë‹¤.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-java\",\n      children: _jsxs(_components.code, {\n        className: \"language-java code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// User.class\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token annotation punctuation\",\n            children: \"@Entity\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token annotation punctuation\",\n            children: \"@Table\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"name \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\"users\\\"\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token annotation punctuation\",\n            children: \"@EntityListeners\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"UserEntityListener\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"class\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"public\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"class\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"User\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"implements\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"Persistable\"\n          }), _jsxs(_components.span, {\n            className: \"token generics\",\n            children: [_jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              className: \"token class-name\",\n              children: \"String\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\u003e\"\n            })]\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token annotation punctuation\",\n            children: \"@Id\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"private\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"String\"\n          }), \" id\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"private\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"String\"\n          }), \" name\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"private\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"boolean\"\n          }), \" isNew \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token boolean\",\n            children: \"true\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"protected\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"User\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"public\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"User\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"String\"\n          }), \" id\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"String\"\n          }), \" name\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\\t\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"id \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" id\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\\t\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"name \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" name\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token annotation punctuation\",\n            children: \"@Override\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"public\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"String\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"getId\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\\t\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"id\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"public\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"setId\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"String\"\n          }), \" id\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\\t\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"id \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" id\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"public\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"String\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"getName\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\\t\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"name\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token annotation punctuation\",\n            children: \"@Override\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"public\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"boolean\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"isNew\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\\t\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"isNew\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"public\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"setIsNew\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"boolean\"\n          }), \" isNew\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\\t\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"isNew \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" isNew\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// UserEntityListener.class\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"public\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"class\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"UserEntityListener\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token annotation punctuation\",\n            children: \"@PostPersist\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token annotation punctuation\",\n            children: \"@PostLoad\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"public\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"setNotNew\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"User\"\n          }), \" user\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\\t\", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"System\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"out\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"println\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\"@PostPersist/@PostLoad called\\\"\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\\tuser\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"setIsNew\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token boolean\",\n            children: \"false\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"\\t\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsxs(_components.h3, {\n      id: \"persist-vs-merge\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#persist-vs-merge\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"persist() vs merge()\"]\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"êµ¬ë¶„\"\n          }), _jsx(_components.th, {\n            children: \"persist()\"\n          }), _jsx(_components.th, {\n            children: \"merge()\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"ë™ì‘\"\n          }), _jsx(_components.td, {\n            children: \"ìƒˆë¡œìš´ Entity ë¥¼ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ë“±ë¡\"\n          }), _jsx(_components.td, {\n            children: \"ì¤€ì˜ì† ê°ì²´ë¥¼ ë³‘í•©í•˜ì—¬ ê´€ë¦¬\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"SELECT ì¿¼ë¦¬\"\n          }), _jsx(_components.td, {\n            children: \"âŒ\"\n          }), _jsx(_components.td, {\n            children: \"âœ… ë¨¼ì € ì¡°íšŒ í›„ merge\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"ID í•„ìš” ì—¬ë¶€\"\n          }), _jsx(_components.td, {\n            children: \"âŒ\"\n          }), _jsx(_components.td, {\n            children: \"âœ…\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"ì„±ëŠ¥\"\n          }), _jsx(_components.td, {\n            children: \"ë¹ ë¦„ (ì§ì ‘ INSERT)\"\n          }), _jsx(_components.td, {\n            children: \"ëŠë¦´ìˆ˜ ìˆë‹¤ (SELECT + UPDATE)\"\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.note, {\n      children: _jsx(_components.p, {\n        children: \"ì‹ ê·œ ê°ì²´ë¥¼ merge() ë¡œ ì²˜ë¦¬í•˜ë©´ ë¶ˆí•„ìš”í•œ SELECT ì¿¼ë¦¬ê°€ ë°œìƒí•˜ê³  ì„±ëŠ¥ ì €í•˜ ê°€ëŠ¥ì„±ì´ ì¡´ì¬í•˜ê²Œ ëœë‹¤.\"\n      })\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsxs(_components.h3, {\n      id: \"ì‹ ê·œ-entity-íŒë‹¨ì´-ì¤‘ìš”í•œ-ì´ìœ ëŠ”-ë¬´ì—‡ì¼ê¹Œ\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#ì‹ ê·œ-entity-íŒë‹¨ì´-ì¤‘ìš”í•œ-ì´ìœ ëŠ”-ë¬´ì—‡ì¼ê¹Œ\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"ì‹ ê·œ Entity íŒë‹¨ì´ ì¤‘ìš”í•œ ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œ?\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Spring Data JPA ì˜ \", _jsx(_components.code, {\n        children: \"SimpleJpaRepository\"\n      }), \" ëŠ” \", _jsx(_components.code, {\n        children: \"save()\"\n      }), \" ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ë™ì‘í•œë‹¤.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-java\",\n      children: _jsxs(_components.code, {\n        className: \"language-java code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token annotation punctuation\",\n            children: \"@Transactional\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"public\"\n          }), \" \", _jsxs(_components.span, {\n            className: \"token generics\",\n            children: [_jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              className: \"token class-name\",\n              children: \"S\"\n            }), \" \", _jsx(_components.span, {\n              className: \"token keyword\",\n              children: \"extends\"\n            }), \" \", _jsx(_components.span, {\n              className: \"token class-name\",\n              children: \"T\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\u003e\"\n            })]\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"S\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"save\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"S\"\n          }), \" entity\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"entityInformation\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"isNew\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"entity\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        entityManager\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"persist\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"entity\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// INSERT\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" entity\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"else\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" entityManager\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"merge\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"entity\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// SELECT â†’ UPDATE, ì¡´ì¬í•˜ë©´ UPDATE ì—†ìœ¼ë©´ INSERT ê°€ëŠ¥ì„± ìˆìŒ\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"ID ë¥¼ ì§ì ‘ ì„¤ì •í–ˆì§€ë§Œ, \", _jsx(_components.code, {\n        children: \"isNew()\"\n      }), \" ëŠ” false ê°€ ë˜ì–´, \", _jsx(_components.code, {\n        children: \"merge()\"\n      }), \" ë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ê³ , \", _jsx(\"br\", {}), \"\\nDatabase ì—ëŠ” í•´ë‹¹ ID ê°€ ì¡´ì¬í•˜ì§€ ì•Šì§€ë§Œ, ì‹ ê·œ Entity ì„ì—ë„ ë¶ˆêµ¬í•˜ê³ , \", _jsx(_components.code, {\n        children: \"SELECT\"\n      }), \" í›„ \", _jsx(_components.code, {\n        children: \"UPDATE\"\n      }), \" ë¥¼ í•˜ê²Œ ë˜ì–´ (ì´ ë•Œ, database ì¡°íšŒ) ì‹¤íŒ¨ ë˜ëŠ” ë°ì´í„° ë¬´ê²°ì„± ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆê³ , ë¹„íš¨ìœ¨ì ì´ë‹¤.\"]\n    }), \"\\n\", _jsx(_components.note, {\n      children: _jsx(_components.p, {\n        children: \"ì •í™•í•œ isNew() ì œì–´ëŠ” ì„±ëŠ¥, ì •í•©ì„±, ì¿¼ë¦¬ íš¨ìœ¨ì„± ì¸¡ë©´ì—ì„œ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤.\"\n      })\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsxs(_components.h3, {\n      id: \"ìš”ì•½\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#ìš”ì•½\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"ìš”ì•½\"]\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"ìƒí™©\"\n          }), _jsx(_components.th, {\n            children: \"ì²˜ë¦¬ë°©ì‹\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"ID ì—†ê±°ë‚˜ null â†’ ì‹ ê·œ Entity\"\n          }), _jsx(_components.td, {\n            children: \"persist()\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"IDê°€ ì¡´ì¬í•˜ì§€ë§Œ ì‹¤ì œ DB ì—ëŠ” ì—†ìŒ\"\n          }), _jsx(_components.td, {\n            children: \"merge() í˜¸ì¶œ â†’ ì‹¤íŒ¨ ê°€ëŠ¥ì„± / ë¹„íš¨ìœ¨\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"ID ë¥¼ ì§ì ‘ ì„¤ì •í•œ ì‹ ê·œ Entity\"\n          }), _jsx(_components.td, {\n            children: \"Persistable\u003cT\u003e + isNew() ë¡œ ëª…ì‹œ í•„ìš”\"\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.tip, {\n      children: _jsx(\"a\", {\n        href: \"https://github.com/eottabom/let-me-code/tree/main/src/main/java/com/eottabom/letmecode/example/_01_jpa_entity\",\n        children: \"ì˜ˆì œ ì½”ë“œ ë³´ëŸ¬ê°€ê¸° (í´ë¦­)\"\n      })\n    }), \"\\n\", _jsx(\"br\", {}), \"\\n\", _jsx(\"br\", {}), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.success, {\n      children: _jsxs(_components.p, {\n        children: [_jsx(\"b\", {\n          children: \"ì •ë¦¬\"\n        }), \"\\nSpring Data JPA ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ isNew() ë¥¼ í†µí•´ì„œ ì‹ ê·œ Entity ì—¬ë¶€ë¥¼ íŒë‹¨í•œë‹¤.\\nID ëŠ” ì¡´ì¬í•˜ì§€ë§Œ ì‹¤ì œ DB ì— ì—†ëŠ” ê²½ìš° SELECT + UPDATE í›„ merge ë¥¼ í•˜ë¯€ë¡œ ì •í•©ì„±ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆê³ , ë¹„íš¨ìœ¨ì ì´ë‹¤.\\nID ë¥¼ ì§ì ‘ ì„¤ì •í–ˆì„ ê²½ìš°ëŠ” Persistable + isNew() ë¡œ ëª…ì‹œí•˜ëŠ” ê²ƒì´ í•„ìš”í•˜ë‹¤.\"]\n      })\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsxs(_components.h3, {\n      id: \"-reference\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#-reference\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"ğŸ“š Reference\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://docs.spring.io/spring-data/jpa/docs/current/api/org/springframework/data/jpa/repository/support/JpaEntityInformation.html\",\n          children: \"Spring Docs - JpaEntityInformation\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://docs.spring.io/spring-data/jpa/reference/jpa/entity-persistence.html\",\n          children: \"Spring Docs - entity-persistence\"\n        })\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(\"br\", {}), \"\\n\", _jsx(\"br\", {})]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{"title":"Spring Data JPA - ìƒˆë¡œìš´ Entity íŒë³„","date":"2025-04-30","tags":["Spring","JPA"],"summary":"How does Spring Data JPA Determine if an Entity is New?","description":"Spring Data JPA ì—ì„œ Entity ê°€ ìƒˆë¡œìš´ ê²ƒì¸ì§€ íŒë‹¨í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì."}},"title":"Spring Data JPA - ìƒˆë¡œìš´ Entity íŒë³„","date":"2025-04-30","tags":["Spring","JPA"],"summary":"How does Spring Data JPA Determine if an Entity is New?","description":"Spring Data JPA ì—ì„œ Entity ê°€ ìƒˆë¡œìš´ ê²ƒì¸ì§€ íŒë‹¨í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì."},"relatedPosts":[]},"__N_SSG":true},"page":"/post/[id]","query":{"id":"jpa-determine-entity-is-new"},"buildId":"5MMN3e4xL5zhvjFseGHAk","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>